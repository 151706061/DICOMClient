<html>
<!--
Help text built into application.
This text is written in a subset of HTML that is 
understood by the Java Swing JLabel class.  It
is edited processed by running the <code>Help</code> class
and then the output pasted into the Help class, and then
the code is compiled.
-->

<h2>DICOM Utility</h2>
<br>
<h3>Introduction</h3>
<br>
The primary purpose of the DICOM Anonymize/Upload tool is<br>
to anonymize DICOM files locally or cop from local storage<br>
on the desktop and put them into the PACS servers.  The tool<br>
also has a simple previewer, which can be used to view DICOM<br>
files even if the user has no intention of anonymizing or<br>
uploading them.<br>
<br>
DICOM files can reside on any storage that the local system<br>
recognizes, including hard disk, CD, DVD, USB, or thumb drives.<br>
<br>

<h3>Starting the Program</h3>
The program may be started by either:
<br>
<ul>
  <li>dragging a DICOM file or directory onto the program icon</li>
  <li>double clicking the icon</li>
</ul>
<br>
<br>
The program has two modes (Anonymize and Upload) indicated by radio<br>
buttons near the top of the screen.  Choose the one that is appropriate<br>
for your needs.  If you only wish to view (preview) files, then either<br>
mode will suffice.
<br>
When a file is dragged to the icon, all DICOM files in the<br>
containing directory are loaded into the program.<br>
<br>
When a directory is dragged to the icon, all DICOM files within<br>
that directory are loaded into the program.<br>
<br>
Double clicking the icon will also start the program, but with no<br>
files loaded.<br>
<br>
After the program has been started, the user may drag additional<br>
files into it and they will be added to the list.<br>
<br>
Files are listed in a hierarchy, which has three levels:<br>
<ul>
  <li>Patient</li>
  <ul>
    <li>Study</li>
    <ul>
      <li>Series</li>
    </ul>
  </ul>
</ul>
with descriptive information for each.  Individual files for each<br>
series are not listed, but the number of files in each is shown.<br>
<br>
For each series, there is a <b>Preview</b> and an <b>Anonymize</b> or an<br>
<b>Upload</b> button.  The <b>Preview</b> is used to preview the series<br>
before anonymizing or uploading.
<br>
Any files that are not valid DICOM files, or, the<br>
program lacks the necessary permissions to read them, will be<br>
noted in the message field (lower left corner) and then ignored.<br>


<br>
<h3>Anonymizing Files</h3>
<br>
Anonymizing creates copies of existing DICOM files with<br>
selected fields anonymized.  New files are created, as<br>
opposed to over-writing files, and the new files are named<br>
with the new patient ID, modality, series number, and<br>
instance (slice) number.  If necessary, an additional number<br>
is added.  An example file name is:<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; ANON3968_CT_2_0021.DCM<br>
<br>
To anonymize a series, select the <b>Anonymize Mode</b><br>
radio button near the top center of the screen, and then<br>
click the <b>Anonymize</b> button next to the desired<br>
series.  The user may perform anonymization on all series<br>
under a given patient by clicking the <b>Anonymize<br>
Patient</b> button, or may anonymize all series under all<br> 
patients by clicking the <b>Anonymize All</b> button near the<br> 
bottom right-hand corner of the window.<br>
<br>
After an anonymization is complete, a green indicator will<br>
be shown as confirmation.<br>
<br>
When Anonymize mode is selected with the radio button,<br>
the destination and <b>Anonymize Options</b> button will<br>
appear underneath, and all the <b>Upload</b> buttons will<br>
change to <b>Anonymize</b>.  Each patient will show<br>
fields indicating the new patient id and name.<br>
<br>
By default, the destination is set to be a sub-directory<br>
named <b>anonymize</b> underneath the first directory of<br>
files loaded.  This may be changed by entering a new<br> 
value or use the <b>Browse...</b> button to select a<br>
directory.  If the directory chosen does not exist,<br>
it will be created.<br>
<br>
Clicking the <b>Anonymize Options</b> will display the<br> 
<b>Anonymize Options</b> window, which allows the user to<br>
customize the anonymization.<br>
<br>
For each patient, a default patient ID is randomly chosen.<br>
This may be changed if desired.  By default, the patient<br>
name will be kept the same as the patient ID.  If the user<br>
wants the patient name to be different from the patient ID,<br> 
then click the checkbox to the right of the <b>New Patient<br>
Name</b> field and set the name as desired.<br>
<br>
By default, the list of fields is set up to reflect those<br>
recommended by the DICOM standard.  The standard indicates<br>
that this list may in some cases be insufficient.  For<br> 
greater control over anonymization, use the <b>Anonymize<br>
Options...</b> button to display the the <b>Anonymize<br>
Options</b> window.  This window shows the fields that<br>
will be anonymized and the new values to be used, except<br>
for UID values which due to their complexity are handled<br>
automatically.  In general, users will not need to modify<br>
this list of values, but if so, then:<br>
<br>
<ul><br>
  <li>New fields may be added with the <b>Add</b> button<br>
        at the bottom of the window.<br>
  <li>Fields may be de-activated by un-checking their<br>
        corresponding checkboxes.<br>
  <li>Alternate values for fields may be chosen with<br>
        the text boxes.<br>
</ul><br>
<br>
Note that existing files are never over-written, so<br>
performing anonymization twice will create two sets of<br>
files, even using the same source files.<br>
<br>
New UIDs (such as SOPInstanceUID, SeriesInstanceUID, and<br> 
StudyInstanceUID) are automatically generated and all old<br> 
UIDs are discarded.  It is not possible to override this<br>
feature.<br>
<br>
When anonymizing multiple series that reference each other<br>
via their UIDs, it is important to anonymize them all in the<br> 
same session (invocation of the tool) so that the UIDs in<br>
the anonymized files will be consistent across the different<br>
series.<br>
<br>
Anonymized files may be re-loaded into the program to<br>
inspect the changes with the previewer.<br>
<br>
It is not necessary to log in to anonymize files.<br>
<br>




<h3>To Upload DICOM Files</h3>
<br>
Before uploading files, for security purposes, you must log in.<br>
Use your ARIA user account name and password.  After logging in,<br>
the login area will be replaced by a PACS selector.  Select the<br>
desired destination PACS  by using the spinner (up and down arrows)<br>
near the top of the screen until the the desired PACS is shown.<br>
<br>
To upload all of the series for all patients, use the <b>Upload All</b><br>
button.<br>
<br>
While a series is being uploaded, its buttons are replaced<br>
with a progress bar.  The display reverts back to the buttons<br>
when the upload is complete.<br>
<br>
When an upload of a complete series is successful, a green circle<br>
with a white plus sign is shown next to its upload button.  If all<br>
series have been uploaded, then an additional green icon is shown<br>
next to the <b>Upload All</b> button.  These indicators are specific to<br>
the PACS that files have been uploaded to.  In other words, if a<br>
series is indicated to have been uploaded, it is only for the PACS<br>
shown.  Switching to a different PACS will change the indicator<br>
to reflect the upload status for that PACS.  The upload state is<br>
reset when the program is exited, so if the program is restarted<br>
with the same DICOM files, they will be shown as not having been<br>
uploaded.<br>
<br>
<h3>Previewing Files</h3>
<br>
To preview DICOM files, drag the slider for the corresponding<br>
series and the preview window will be shown.  The preview window<br>
can show files as either images or text.  There is a pair of<br>
radio buttons at the bottom to select the mode.<br>
<br>
The title of the preview window shows basic information that<br>
identifies the series, and near the top of the window it<br>
displays the file from which the data originated.<br>
<br>
In image mode, the three sliders can be used to control the<br>
contrast, brightness and size of the image.  Between the sliders<br>
is a <b>Reset</b> button that resets the sliders to their<br>
initial position, which shows the image in an un-altered<br>
state.<br>
<br>
In text mode, there is search field where the user can type<br>
a string of text to search for.  Searches are case-insensitive,<br>
and the currently selected matching string and the total<br>
number of matching strings are indicated as <b>current of<br>
total</b>.
<br>
Searches are literal (as opposed to wild card or<br>
regular expressions), do not span lines, and can be used to<br>
search the names of fields as well their as values.  The<br>
down and up arrows next to the search field can be used to<br>
navigate to the previous and next matches.<br>
<br>
The user can also select text and use conventional copy and<br>
paste to copy it to another application.<br>
<br>
The text can not be modified in place.<br>
<br>
In text mode there are also two shortcuts.  After clicking<br>
in the text area:<br>
<br>
<ul>
<li>Enter will position to the next matching text string.</li>
<li>Selecting text and then typing Ctrl-F will search for that text.</li>
</ul>
<br>
Pressing <b>Enter</b> from the search field will scroll the<br>
text window to show the next match.  After the last match is<br>
scrolled to, the window will scroll back to the first match.<br>
<br>
<h3>Additional Notes</h3>
<br>
In general, uploading the same series multiple times has no real<br>
effect, as the copy on the PACS is over written with the new copy. <br>
<br>
Once a file has been uploaded it can not be un-uploaded.<br>
<br>
This program does not modify the files on local storage.<br>
<br>
</html>
